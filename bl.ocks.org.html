<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html data-ctzscriptallow="true"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>

* {
  font-family: "Helvetica Neue", "Helvetica", "Arial", sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.axis text {
  font: 10px sans-serif;
}

.CIECAM02, .CIECAM02-UCS {
  border: 1px solid #ccc;
  border-radius: 5px;
  display:inline-block;
  margin-bottom: 15px;
  padding: 0px;
  text-align: center;
  width: 420px;
}

.channel {
  display: block;
}
.channel canvas {
  float: left;
  margin: 0px 10px 0 10px;
  width: 400px;
  height: 90px;
}
.channel span {
  display: block;
  border-bottom: 1px solid #ccc;
  margin-bottom: 15px;
  padding-bottom: 2px;
  width: 100%;
}

</style>
</head><body><div class="CIECAM02-UCS">
  <strong>CIECAM02-UCS</strong>
  <div class="channel" id="J">
    <canvas width="400" height="1"></canvas>
    <svg width="420" height="20"><g class="axis axis-J" transform="translate(10,.5)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#000" d="M0.5,6V0.5H400.5V6"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">0</text></g><g class="tick" opacity="1" transform="translate(40.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">10</text></g><g class="tick" opacity="1" transform="translate(80.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">20</text></g><g class="tick" opacity="1" transform="translate(120.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">30</text></g><g class="tick" opacity="1" transform="translate(160.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">40</text></g><g class="tick" opacity="1" transform="translate(200.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">50</text></g><g class="tick" opacity="1" transform="translate(240.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">60</text></g><g class="tick" opacity="1" transform="translate(280.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">70</text></g><g class="tick" opacity="1" transform="translate(320.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">80</text></g><g class="tick" opacity="1" transform="translate(360.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">90</text></g><g class="tick" opacity="1" transform="translate(400.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">100</text></g></g></svg>
    <span>J* (lightness)</span>
  </div>
  <div class="channel" id="a">
    <canvas width="400" height="1"></canvas>
    <svg width="420" height="20"><g class="axis axis-a" transform="translate(10,.5)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#000" d="M0.5,6V0.5H400.5V6"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">-40</text></g><g class="tick" opacity="1" transform="translate(50.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">-30</text></g><g class="tick" opacity="1" transform="translate(100.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">-20</text></g><g class="tick" opacity="1" transform="translate(150.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">-10</text></g><g class="tick" opacity="1" transform="translate(200.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">0</text></g><g class="tick" opacity="1" transform="translate(250.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">10</text></g><g class="tick" opacity="1" transform="translate(300.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">20</text></g><g class="tick" opacity="1" transform="translate(350.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">30</text></g><g class="tick" opacity="1" transform="translate(400.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">40</text></g></g></svg>
    <span><em>a*</em> (greenness-to-redness)</span>
  </div>
  <div class="channel" id="b">
    <canvas width="400" height="1"></canvas>
    <svg width="420" height="20"><g class="axis axis-b" transform="translate(10,.5)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#000" d="M0.5,6V0.5H400.5V6"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">-40</text></g><g class="tick" opacity="1" transform="translate(50.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">-30</text></g><g class="tick" opacity="1" transform="translate(100.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">-20</text></g><g class="tick" opacity="1" transform="translate(150.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">-10</text></g><g class="tick" opacity="1" transform="translate(200.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">0</text></g><g class="tick" opacity="1" transform="translate(250.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">10</text></g><g class="tick" opacity="1" transform="translate(300.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">20</text></g><g class="tick" opacity="1" transform="translate(350.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">30</text></g><g class="tick" opacity="1" transform="translate(400.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">40</text></g></g></svg>
    <span>b* (blueness-to-yellowness)</span>
  </div>
</div>

<div class="CIECAM02">
  <strong>CIECAM02</strong>
  <div class="channel" id="J2">
    <canvas width="400" height="1"></canvas>
    <svg width="420" height="20"><g class="axis axis-J2" transform="translate(10,.5)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#000" d="M0.5,6V0.5H400.5V6"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">0</text></g><g class="tick" opacity="1" transform="translate(40.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">10</text></g><g class="tick" opacity="1" transform="translate(80.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">20</text></g><g class="tick" opacity="1" transform="translate(120.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">30</text></g><g class="tick" opacity="1" transform="translate(160.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">40</text></g><g class="tick" opacity="1" transform="translate(200.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">50</text></g><g class="tick" opacity="1" transform="translate(240.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">60</text></g><g class="tick" opacity="1" transform="translate(280.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">70</text></g><g class="tick" opacity="1" transform="translate(320.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">80</text></g><g class="tick" opacity="1" transform="translate(360.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">90</text></g><g class="tick" opacity="1" transform="translate(400.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">100</text></g></g></svg>
    <span>J* (lightness)</span>
  </div>
  <div class="channel" id="C">
    <canvas width="400" height="1"></canvas>
    <svg width="420" height="20"><g class="axis axis-C" transform="translate(10,.5)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#000" d="M0.5,6V0.5H400.5V6"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">0</text></g><g class="tick" opacity="1" transform="translate(40.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">10</text></g><g class="tick" opacity="1" transform="translate(80.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">20</text></g><g class="tick" opacity="1" transform="translate(120.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">30</text></g><g class="tick" opacity="1" transform="translate(160.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">40</text></g><g class="tick" opacity="1" transform="translate(200.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">50</text></g><g class="tick" opacity="1" transform="translate(240.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">60</text></g><g class="tick" opacity="1" transform="translate(280.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">70</text></g><g class="tick" opacity="1" transform="translate(320.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">80</text></g><g class="tick" opacity="1" transform="translate(360.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">90</text></g><g class="tick" opacity="1" transform="translate(400.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">100</text></g></g></svg>
    <span>C (chroma)</span>
  </div>
  <div class="channel" id="h">
    <canvas width="400" height="1"></canvas>
    <svg width="420" height="20"><g class="axis axis-h" transform="translate(10,.5)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="#000" d="M0.5,6V0.5H400.5V6"></path><g class="tick" opacity="1" transform="translate(0.5,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">0</text></g><g class="tick" opacity="1" transform="translate(56.05555555555556,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">50</text></g><g class="tick" opacity="1" transform="translate(111.61111111111111,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">100</text></g><g class="tick" opacity="1" transform="translate(167.16666666666669,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">150</text></g><g class="tick" opacity="1" transform="translate(222.72222222222223,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">200</text></g><g class="tick" opacity="1" transform="translate(278.27777777777777,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">250</text></g><g class="tick" opacity="1" transform="translate(333.83333333333337,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">300</text></g><g class="tick" opacity="1" transform="translate(389.38888888888886,0)"><line stroke="#000" y2="6"></line><text fill="#000" y="9" dy="0.71em">350</text></g></g></svg>
    <span>h (hue)</span>
  </div>
</div>

<div>
  <input type="text" id="inR">
  <input type="text" id="inG">
  <input type="text" id="inB">
  <button onclick="renderInput()">render</button>
  <input type="text" id="outR">
  <input type="text" id="outG">
  <input type="text" id="outB">
</div>

<canvas id="outColor" style="width:50px; height:50px;"></canvas>

<script src="./bl.ocks.org_files/d3.v4.js.下载"></script>
<script src="./bl.ocks.org_files/d3-cam02.js.下载"></script>
<script>

  inR = document.getElementById("inR");
  inG = document.getElementById("inG");
  inB = document.getElementById("inB");
  outR = document.getElementById("outR");
  outG = document.getElementById("outG");
  outB = document.getElementById("outB");
  var outColor = document.getElementById("outColor");
  var outColorCtx = outColor.getContext('2d');


var white = d3.rgb("white"),
    black = d3.rgb("black"),
    width = d3.select("canvas").property("width");

var channels = {
  J: {scale: d3.scaleLinear().domain([0, 100]).range([0, width]), x: width / 2},
  a: {scale: d3.scaleLinear().domain([-40, 40]).range([0, width]), x: width / 2},
  b: {scale: d3.scaleLinear().domain([-40, 40]).range([0, width]), x: width / 2},
  J2: {scale: d3.scaleLinear().domain([0, 100]).range([0, width])},
  C: {scale: d3.scaleLinear().domain([0, 100]).range([0, width])},
  h: {scale: d3.scaleLinear().domain([0, 360]).range([0, width])},
};
var startJCh = d3.jch(d3.jab(channels.J.scale.invert(channels.J.x),
                             channels.a.scale.invert(channels.J.x),
                             channels.b.scale.invert(channels.J.x)));

channels.J2.x = channels.J2.scale(startJCh.J);
channels.C.x = channels.C.scale(startJCh.C);
channels.h.x = channels.h.scale(startJCh.h);

var channel = d3.selectAll(".channel")
    .data(d3.entries(channels));

channel.select(".axis")
    .each(function(d) {
      var thisEl = d3.select(this),
          axis;

      if(thisEl.classed("axis-J")) axis = channels.J.scale;
      if(thisEl.classed("axis-a")) axis = channels.a.scale;
      if(thisEl.classed("axis-b")) axis = channels.b.scale;
      if(thisEl.classed("axis-J2")) axis = channels.J2.scale;
      if(thisEl.classed("axis-C")) axis = channels.C.scale;
      if(thisEl.classed("axis-h")) axis = channels.h.scale;

      d3.select(this)
          .call(d3.axisBottom(axis));
    });

var canvas = channel.select("canvas")
    .each(function() {
      var thisCanvas = d3.select(this);
      thisCanvas
          .call(d3.drag()
              .container(function() { return this; })
              .on("drag", dragged))
          .each(render);
    });

function dragged(d) {
  d.value.x = Math.max(0, Math.min(this.width - 1, d3.mouse(this)[0]));
  if(d.key !== "J" && d.key !== "a" && d.key !== "b") {
    var current = d3.jab(d3.jch(
      channels.J2.scale.invert(channels.J2.x),
      channels.C.scale.invert(channels.C.x),
      channels.h.scale.invert(channels.h.x)
    ));
    channels.J.x = channels.J.scale(current.J);
    channels.a.x = channels.a.scale(current.a);
    channels.b.x = channels.b.scale(current.b);
  // }
  } else {
    var current = d3.jch(d3.jab(
      channels.J.scale.invert(channels.J.x),
      channels.a.scale.invert(channels.a.x),
      channels.b.scale.invert(channels.b.x)
    ));
    channels.J2.x = channels.J2.scale(current.J);
    channels.C.x = channels.C.scale(current.C);
    channels.h.x = channels.h.scale(current.h);
  }
  canvas.each(render);
}

function render(d) {
  var width = this.width,
      context = this.getContext("2d"),
      image = context.createImageData(width, 1),
      i = -1;

  if(d.key !== "J" && d.key !== "a" && d.key !== "b") {
    var current = d3.jch(
      channels.J2.scale.invert(channels.J2.x),
      channels.C.scale.invert(channels.C.x),
      channels.h.scale.invert(channels.h.x)
    );
    currentRGB = d3.rgb(current);
    console.log(currentRGB);
    outR.value=currentRGB.r;
    outG.value=currentRGB.g;
    outB.value=currentRGB.b;
    
    outColorCtx.fillStyle=currentRGB;
    outColorCtx.fillRect(0,0,outColor.width,outColor.height);
  } else {
    var current = d3.jab(
      channels.J.scale.invert(channels.J.x),
      channels.a.scale.invert(channels.a.x),
      channels.b.scale.invert(channels.b.x)
    );
  }

  for (var x = 0, v, c; x < width; ++x) {
    if (x === Math.round(d.value.x)) {
      c = white;
    } else if (x === Math.round(d.value.x) - 1) {
      c = black;
    } else {
      var idx = d.key === "J2" ? "J" : d.key;
      current[idx] = d.value.scale.invert(x);
      c = current.rgb();
    }

    if(c.displayable()) {
      image.data[++i] = c.r;
      image.data[++i] = c.g;
      image.data[++i] = c.b;
      image.data[++i] = 255;
    } else {
      image.data[++i] = 0;
      image.data[++i] = 0;
      image.data[++i] = 0;
      image.data[++i] = 255;
    }
  }

  context.putImageData(image, 0, 0);
}

function renderInput() {

}

</script>
</body><script>(function (o) {
  const convertToGMT = function (n) {
    const format = function (v) {return (v < 10 ? '0' : '') + v};
    return (n <= 0 ? '+' : '-') + format(Math.abs(n) / 60 | 0) + format(Math.abs(n) % 60);
  };
  //
  const resolvedOptions = Intl.DateTimeFormat().resolvedOptions();
  const {
    toJSON, getYear, getMonth, getHours, toString, getMinutes, getSeconds, getUTCMonth, getFullYear, getUTCHours,
    getUTCFullYear, getMilliseconds, getTimezoneOffset, getUTCMilliseconds, toLocaleTimeString, toLocaleDateString,
    toISOString, toGMTString, toUTCString, toTimeString, toDateString, getUTCSeconds, getUTCMinutes, toLocaleString,
    getDay, getUTCDate, getUTCDay, getDate
  } = Date.prototype;
  //
  Object.defineProperty(Date.prototype, '_offset', {"configurable": true, get() {return getTimezoneOffset.call(this)}});
  Object.defineProperty(Date.prototype, '_date', {"configurable": true, get() {
    return this._nd !== undefined ? this._nd : new Date(this.getTime() + (this._offset - o.value) * 60 * 1000);
  }});
  //
  Object.defineProperty(Date.prototype, 'toJSON', {"value": function () {return toJSON.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getDay', {"value": function () {return getDay.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getDate', {"value": function () {return getDate.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getYear', {"value": function () {return getYear.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getTimezoneOffset', {"value": function () {return Number(o.value)}});
  Object.defineProperty(Date.prototype, 'getMonth', {"value": function () {return getMonth.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getHours', {"value": function () {return getHours.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getUTCDay', {"value": function () {return getUTCDay.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getUTCDate', {"value": function () {return getUTCDate.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getMinutes', {"value": function () {return getMinutes.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getSeconds', {"value": function () {return getSeconds.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getUTCMonth', {"value": function () {return getUTCMonth.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getUTCHours', {"value": function () {return getUTCHours.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getFullYear', {"value": function () {return getFullYear.call(this._date)}});
  Object.defineProperty(Date.prototype, 'toISOString', {"value": function () {return toISOString.call(this._date)}});
  Object.defineProperty(Date.prototype, 'toGMTString', {"value": function () {return toGMTString.call(this._date)}});
  Object.defineProperty(Date.prototype, 'toUTCString', {"value": function () {return toUTCString.call(this._date)}});
  Object.defineProperty(Date.prototype, 'toDateString', {"value": function () {return toDateString.call(this._date)}});
  Object.defineProperty(Date.prototype, 'toTimeString', {"value": function () {return toTimeString.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getUTCSeconds', {"value": function () {return getUTCSeconds.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getUTCMinutes', {"value": function () {return getUTCMinutes.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getUTCFullYear', {"value": function () {return getUTCFullYear.call(this._date)}});
  Object.defineProperty(Date.prototype, 'toLocaleString', {"value": function () {return toLocaleString.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getMilliseconds', {"value": function () {return getMilliseconds.call(this._date)}});
  Object.defineProperty(Date.prototype, 'getUTCMilliseconds', {"value": function () {return getUTCMilliseconds.call(this._date)}});
  Object.defineProperty(Date.prototype, 'toLocaleTimeString', {"value": function () {return toLocaleTimeString.call(this._date)}});
  Object.defineProperty(Date.prototype, 'toLocaleDateString', {"value": function () {return toLocaleDateString.call(this._date)}});
  //
  Object.defineProperty(Intl.DateTimeFormat.prototype, 'resolvedOptions', {"value": function () {return Object.assign(resolvedOptions, {"timeZone": o.name})}});
  Object.defineProperty(Date.prototype, 'toString', {"value": function () {
    return toString.call(this._date).replace(convertToGMT(this._offset), convertToGMT(o.value)).replace(/\(.*\)/, '(' + o.name.replace(/\//g, ' ') + ' Standard Time)');
  }});
  //
  document.documentElement.dataset.ctzscriptallow = true;
})({"name":"Asia/Tokyo","index":33,"value":"-540"})</script></html>